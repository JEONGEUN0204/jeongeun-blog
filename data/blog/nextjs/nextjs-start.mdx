---
title: 'ğŸ“ Next.js : ë…¸ë§ˆë“œì½”ë” - NextJS ì‹œì‘í•˜ê¸°'
date: '2024-04-25'
lastmod: '2024-04-25'
tags: ['nextjs']
draft: false
summary: 'Next.jsëŠ” React ê¸°ë°˜ì˜ í”„ë ˆì„ì›Œí¬ë¡œ, ì„œë²„ì‚¬ì´ë“œ ë Œë”ë§ê³¼ ì •ì  ì‚¬ì´íŠ¸ ìƒì„±ì„ ì§€ì›í•œë‹¤.'
images: []
---

## â–¶ 1ê°•

### âœ… react.js ì™€ next.jsì˜ ì°¨ì´

- react.js : ë¼ì´ë¸ŒëŸ¬ë¦¬(ë‚´ê°€ ì‚¬ìš©í•˜ëŠ” ê²ƒ)
- next.js : í”„ë ˆì„ì›Œí¬(ìš°ë¦¬ê°€ ê·œì¹™ì„ ì§€ì¼œì•¼í•¨, ì£¼ë„ê¶Œ ì—†ìŒ)

### âœ… Project setting

- npm init -y : package.json ì„¤ì¹˜ë¨
- package.jsonì˜ "lisence"ê°’ "MIT"ë¡œ ë³€ê²½
- npm install react@latest next@latest react-dom@latest
- "dev" scriptë¥¼ ë§Œë“¤ê³  "next dev" ëª…ë ¹ì–´ ì§€ì •
- appí´ë”ì— page.tsx ìƒì„± (ê¼­!! appê³¼ page)
- npm run devë¡œ ì‹¤í–‰

## â–¶ 2ê°•

### âœ… Defining Routes

- app í´ë” ì•ˆì— ë§Œë“¤ê³  ì‹¶ì€ í˜ì´ì§€ í´ë”ë¥¼ ë§Œë“¤ê³  page.tsx íŒŒì¼ì„ ë§Œë“¤ë©´ ìë™ìœ¼ë¡œ ê²½ë¡œê°€ ëœë‹¤.
  ex) app/login/page.tsx ---> http://localhost:3000/login
- ì‚¬ìš©ìê°€ urlë¡œë¶€í„° ë³´ê²Œ ë  ìš”ì†ŒëŠ” page.tsx

### âœ… Not Found

- app/not-found.tsx : ì˜ëª»ëœ urlë¥¼ ì…ë ¥í–ˆì„ ë•Œ ë³´ì—¬ì¤€ë‹¤.

### âœ… Link

- `import Link from "next/link"`
- í´ë¦­í•˜ë©´ í˜ì´ì§€ ì´ë™
- ex) `<Link href="/">Home</Link>`

### âœ… usePathname

- `import { usePathname } from "next/navigation";`
- í˜„ì¬ ê²½ë¡œëª…ì„ ì•Œë ¤ì¤€ë‹¤.
- client component hook : ì‚¬ìš© íŒŒì¼ì— "use client" ì¨ì¤˜ì•¼í•œë‹¤.

### âœ… SSR VS CSR

- rendering ì˜ë¯¸ : javascript functionì„ ê°€ì ¸ì™€ì„œ ë¸Œë¼ìš°ì €ê°€ ì´í•´í•  ìˆ˜ ìˆëŠ” HTMLë¡œ ë³€í™˜í•˜ëŠ” ì‘ì—…ì„ ë§í•œë‹¤.
- CSR : client side rendering
  - ëª¨ë“  rendering, ì¦‰ ëª¨ë“  UI êµ¬ì¶• ì‘ì—…ì´ ëª¨ë‘ client ì¸¡ì—ì„œ ë°œìƒ
  - clientëŠ” javascriptë¥¼ ë¡œë“œí•˜ê³ , ê·¸ í›„ì— javascriptê°€ UIë¥¼ ë¹Œë“œ
- SSR : server side rendering
  - javascriptê°€ í™œì„±í™”ë˜ì–´ìˆì§€ ì•Šì•„ë„ ì‚¬ìš©ìê°€ HTMLì„ ë³¼ ìˆ˜ ìˆë‹¤.
  - ëª¨ë“  ì»´í¬ë„ŒíŠ¸ì™€ í˜ì´ì§€ë“¤ì€ ë¨¼ì € backendì—ì„œ render.

### âœ… Hydration

- ë‹¨ìˆœ HTMLì„ React applicationìœ¼ë¡œ ì´ˆê¸°í™”í•˜ëŠ” ì‘ì—….
- ì‚¬ìš©ìê°€ í˜ì´ì§€ì— ì ‘ì†ì„ ì‹œë„í•˜ë©´, backendì—ì„œ ìƒì„±ëœ ë‹¨ìˆœ HTMLì„ ë„˜ê²¨ì£¼ê³  ë’·ë‹¨ì—ì„œ React applicationì„ ì´ˆê¸°í™”(HTMLì„ interacitveí•˜ê²Œ ë§Œë“¤ê¸° ìœ„í•´ì„œ)

### âœ… "use client"

- hydrateê°€ í•„ìš”í•œ componentì— "use client"ë¥¼ ì¨ì¤˜ì•¼í•œë‹¤.
- ì¦‰, "use client"ë¥¼ ì¨ì¤€ componentëŠ” backendì—ì„œ render ë˜ê³ , frontendì—ì„œ hydrateëœë‹¤.
- server component ì•ˆì— client componetëŠ” ê°€ì§ˆ ìˆ˜ ìˆì§€ë§Œ ê·¸ ë°˜ëŒ€ëŠ” ë¶ˆê°€.

### âœ… Layouts

- NextJSëŠ” root layoutì„ ì ìš©í•˜ê³  urlì„ í™•ì¸í•´ í•´ë‹¹ í´ë”ë¡œ ê°€ì„œ layoutì´ ìˆë‹¤ë©´ ì ìš©í•œë‹¤.
- ì¤‘ì²© ê°€ëŠ¥

### âœ… Route group

- ë£¨íŠ¸ ë ˆì´ì•„ì›ƒì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì—¬ëŸ¬ ë ˆì´ì•„ì›ƒì„ ì‚¬ìš©í•˜ê²Œ í•  ìˆ˜ ìˆë‹¤.
- ë ˆì´ì•„ì›ƒ ì¤‘ì—ì„œ ì„ íƒí•˜ê±°ë‚˜ ì„ íƒ í•´ì œí•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
- (í´ë” ì´ë¦„) ê³¼ ê°™ì´ í´ë” ì´ë¦„ì„ ê´„í˜¸ë¡œ ë¬¶ì–´ì¤€ë‹¤. -> urlì—ì„œ ë³´ì´ì§€ ì•ŠëŠ”ë‹¤.

\*\* í™œìš©í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì´ ë§ì€ ê²ƒ ê°™ë‹¤. ì°¾ì•„ë´ì•¼ê² ë‹¤.

### âœ… Metadata

- HTML head ì—˜ë¦¬ë¨¼íŠ¸ ë‚´ì˜ meta íƒœê·¸ ì •ì˜
- layoutê³¼ pageë§Œ exportí•œë‹¤.
- ë‹¤ë¥¸ metadataë“¤ê³¼ ë³‘í•©ëœë‹¤.
- ì•„ë˜ì™€ ê°™ì´ templateì„ ì§€ì •í•  ìˆ˜ ìˆë‹¤.

```javascript
export const metadata = {
  title: {
    template: '%s | Next Movies',
    default: 'Loading...',
  },
  description: 'Generated by Next.js',
}
```

ğŸ”—[ê³µì‹ë¬¸ì„œ : metadata](https://nextjs.org/docs/app/building-your-application/optimizing/metadata)

### âœ… Dynamic Routes

- ì •ì ì¸ ê²½ë¡œê°€ ì•„ë‹Œ ë™ì ì¸ ê²½ë¡œ
- [í´ë”ì´ë¦„] ê³¼ ê°™ì´ ëŒ€ê´„í˜¸ë¥¼ ì¨ì„œ ìƒì„±í•œë‹¤.
- ì‚¬ìš© ì˜ˆì‹œ : [id] ì¸ ê²½ìš°

```javascript
export default function MovieDetail({ params: { id } }) {
  return <h1>Movie {id}</h1>
}
```

## â–¶ 3ê°•

### âœ… Data Fetch

- ë°ì´í„°ë¥¼ fetchí•˜ëŠ” ì½”ë“œ ì‘ì„±
- server componentì— ë„£ê¸° (ì‚¬ìš©ìì—ê²Œ ì „ë‹¬ x, dev toolì—ì„œ ë³´ì´ì§€ ì•ŠìŒ)
- í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ëŠ” async

### âœ… Loading

- loading.tsx
- server componentê°€ fetchí•˜ëŠ” ì¤‘ì— loading íŒŒì¼ì„ ì œê³µí•´ì£¼ë©´ í˜ì´ì§€ì— ë‚˜íƒ€ë‚œë‹¤.
- awaitê°€ ëë‚˜ë©´ loading componentë¥¼ awaitëœ componentë¡œ ë°”ê¿”ì¤€ë‹¤.

### âœ… Parallel Requests

- Promise.all ì‚¬ìš©

```javascript
const [movie, videos] = await Promise.all([getMovie(id), getVideos(id)])
```

- movie-infoíŒŒì¼ê³¼ movie-videosíŒŒì¼ì„ ë§Œë“¤ì–´ ê°ê° ê°œë³„ì ìœ¼ë¡œ ê¸°ë‹¤ë¦¬ê²Œ í•œë‹¤.

### âœ… Suspense

- MovieInfoì™€ MovieVideosëŠ” async componentì´ê¸° ë•Œë¬¸ì— suspense componentë¡œ ê°ì‹¸ì¤˜ì•¼í•œë‹¤.
- Suspense componentì˜ fallback prop : componentê°€ awaitë˜ëŠ” ë™ì•ˆ í‘œì‹œí•  ë©”ì„¸ì§€ë¥¼ renderí•  ìˆ˜ ìˆê²Œ í•´ì¤€ë‹¤.

### âœ… Error Handling

- error.tsx : ì˜¤ë¥˜ê°€ ë°œìƒí•  ê²½ìš° í•´ë‹¹ í˜ì´ì§€ë¥¼ ë³´ì—¬ì¤€ë‹¤.
- "use client"
- ê°™ì€ ë ˆë²¨ì˜ í˜ì´ì§€ì—ì„œ ë°œìƒí•˜ëŠ” ì—ëŸ¬ì—ë§Œ ì‘ë™í•œë‹¤.

## â–¶ 4ê°•

### âœ… CSS Modules

- íŒŒì¼ ì´ë¦„ : ì´ë¦„.module.css
- ê³ ìœ í•œ í´ë˜ìŠ¤ ì´ë¦„ì„ ìë™ìœ¼ë¡œ ìƒì„±

### âœ… Dynamic Metadata

- generateMetadata í•¨ìˆ˜ ì‚¬ìš©

```typescript
export async function geberateMetadata({ params: { id } }: IParmas) {
  const movie = await getMovie(id)
  return {
    title: movie.title,
  }
}
```

### âœ… prefetch

- Link ì»´í¬ë„ŒíŠ¸ê°€ ì‚¬ìš©ìì˜ ë·°í¬íŠ¸ì— ë“¤ì–´ê°ˆ ë•Œ ë°œìƒ
- ì—°ê²°ëœ ê²½ë¡œì˜ ë°ì´í„°ë¥¼ ë°±ê·¸ë¼ìš´ë“œì—ì„œ prefetch ë° load
- productionì—ì„œë§Œ í™œì„±í™”
